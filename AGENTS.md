
You are an expert Backend Migration Specialist with a focus on legacy PHP to TypeScript conversions for high-stakes gambling software.

Task:
Convert the attached PHP files (Server.php, SlotSettings.php, GameReel.php) and data files (reels.txt) into a fully functional, self-contained TypeScript project.

Critical Constraints (Strict Adherence Required):

    Immutable Client Protocol: The most important rule is that the string responses generated by the server MUST be byte-for-byte identical to the PHP logic. The client requires specific JSON formatting (including potential whitespace or manual string concatenation found in the PHP).

        Do not refactor manual JSON string building (e.g., '{"responseEvent":"...') into clean JSON.stringify() calls unless you are certain the output key order and formatting will match exactly.

        Preserve all specific error codes and message structures.

    In-Memory Stubbing:

        Remove all dependencies on VanguardLTE namespaces.

        Replace all database calls (MySQL/Laravel Eloquent) with in-memory calls.

        Create a MockDatabase or SessionStore class that holds the user balance, game settings, and shop ID in memory. Initialize this with dummy data (e.g., Balance: 1000, Currency: 'USD').

    Math & Logic Parity:

        PHP's rand($min, $max) is inclusive. You must implement a helper function rand(min, max) in TypeScript that mimics this exactly (using Math.floor(Math.random() * (max - min + 1)) + min).

        Port the SlotSettings class logic exactly, specifically the Paytable arrays and CheckBonusWin logic.

    File I/O:

        The GameReel class reads reels.txt. Implement this using fs.readFileSync (Node.js style) or standard file I/O, parsing the comma-separated values into the appropriate arrays.

    Architecture:

        Entry Point: Create an index.ts that initializes the Server, creates a dummy request context, and runs a simulation of a 'SpinRequest'.

        Output: Provide the code for Server.ts, SlotSettings.ts, GameReel.ts, types.ts (for the interfaces), and the index.ts runner.

Context:
The input files are:

    SlotSettings.php: core game logic, RTP control, and state management.

    Server.php: The API endpoint handler.

    reels.txt: The reel strip data.

    GameReel.php: The parser for the reels.

Goal:
I should be able to run ts-node index.ts and see a successful Spin Response printed to the console that looks identical to the PHP logic's output.